<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135178577-1"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-135178577-1');
</script>

<title>Denis Vashchenko</title>
<link rel="icon" href="images/background/meirl.png">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<link rel="stylesheet" href="assets/css/main.css" />
<link rel="stylesheet"
    href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css">
<noscript>
    <link rel="stylesheet" href="assets/css/noscript.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
</noscript>
<canvas id="myChart" width="400" height="400"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script src="https://www.chartjs.org/samples/latest/utils.js"></script>

<body class="is-preload">
    <article id="experience">
        <div class="column_bottom">
            <div class="wrapper" style="max-width: 1000px; margin: auto">
                <canvas id="chart"></canvas>
            </div>
        </div>
    </article>

</body>

<script>

    var presets = window.chartColors;
    console.log(presets)
    var utils = Samples.utils;
    var ctx = document.getElementById('chart').getContext('2d');
    var options = {
        maintainAspectRatio: true,
        spanGaps: false,
        elements: {
            line: {
                tension: 0.1,
            }
        },
        scale: {
            gridLines: {
                color: ['black', 'red', 'orange', 'yellow', 'green', 'blue', 'indigo']
            },
            ticks: {
                display: false
            }
        }
    };
    var data = {
        labels: ['danceability', 'energy', 'instrumentalness', 'liveness', 'loudness', 'speechiness', 'valence'],
        datasets: []
    };

    var chart = new Chart('chart', {
        type: 'radar',
        data: data,
        options: options,
    });

    function getColor() {
        var letters = '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }

    $.ajax({
        url: "https://discovermeekly.azurewebsites.net/api/dataPipe?code=DnlLHUs5J0dSP3t9GHwu5nJfvSmz0z8T2l5f6CEXqTJTPMja90y6cA==&analysis=features",
        type: "GET",
        success: function (result) {
            weeks = JSON.parse(result)
            weeks.forEach(function (value, index) {
                var datapoint = {
                    "label": "Week " + index,
                    "backgroundColor": getColor(),
                    "data": []
                }
                datapoint.data.push(value['danceability'], value['energy'], value['instrumentalness'], value['liveness'], value['loudness'], value['speechiness'], value['valence'])
                data.datasets.push(datapoint);
                chart.update();
            });
        },
        error: function (error) {
            console.log(error);
        }
    })

</script>